{% extends 'base.html' %}

{% block title %} payment {% endblock %}


{% block body %}

<div class="container my-5">
    <div class="row justify-content-center">
        {% if cart %}
 
        <div class="col-sm-4">
            <div class="card">
                <div class="card-body">
                    <h3>Tóm tắt giỏ hàng </h3>
                    <hr color="black">
                    <form id="orderForm" action="/place-order" method="POST">

                    <ul class="list-group">
                        {% for item in cart %}

                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0"><strong>{{item.product.product_name}}</strong><span id="amount">{{item.product.current_price}} X <span id="quantity{{item.id}}">{{ item.quantity}}</span></span></li>

                        {% endfor %}


                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">Thành tiền: <span>VND <span id="amount_tt">{{ amount }}</span></span></li>
                        <li class="list-group-item justify-content-between align-items-center border-0 px-0 pb-0">
                            <div style="margin-top: 15px;">
                                <p>Phí vận chuyển đến :</p>
                                <input type="text" class="form-control" id="shipping-address" name="shipping-address" value="{{ship_address}}" readonly style="width: 100%;" required>
                                <p class="mt-2">(khoảng {{distance_km}}km) là: {{fee}}VND</p>
                            </div>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                            <div style="margin-top: 15px;">
                                <strong>Tổng cộng (Bao gồm phí vận chuyển)</strong><small>(Including Shipping)</small>
                            </div>
                            <span><strong>VND</strong> </strong><span id="totalamount"><strong>{{ total }}</strong></span></span>
    
                        </li>

                    </ul>
                        <button type="submit" id="submit" class="btn btn-primary">Đặt hàng</button>             
                    </form>
                    
                    

                </div>
            </div>
        </div>



        {% else %}

        <h1 class="text-center mb-5" style="color: white;">Giỏ hàng của bạn đang trống</h1>

        {% endif %}
    </div>
</div>


{% endblock %}